<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>test</h1>
    <script>
      const productToLocalStorage = [{
        id: 1,
        quantity: 1,
        color: "red",
      }];
      const productToLocalStorage2 = {
        id: 1,
        quantity: 1,
        color: "green",
      };
      let localstorage = {
        set: function (key, value) {
          window.localStorage.setItem(key, JSON.stringify(value));
        },
        get: function (key) {
          try {
            return JSON.parse(window.localStorage.getItem(key));
          } catch (e) {
            return null;
          }
        },
      };
      console.log(localstorage);
      productToLocalStorage.push(productToLocalStorage2)
       localstorage.set("product", productToLocalStorage);
       

       produit = localstorage.get("product")
       console.log(typeof produit);
       for (const [k, v] of Object.entries(produit)){
         console.log("i", v);
         console.log("k", k);
        //  if(i.id == 1){
        //   console.log(i);
        //    localstorage.set(productToLocalStorage)
        //  }
       }
       console.log(localstorage.get("product")); 


      //  product.js function
      const setProductToLocalStorage = (
  storageLocal,
  productToLocalStorage,
  localDataName
) => {
  const products = JSON.parse(localStorage.getItem(localDataName));
  
  if(!products){
storageLocal.push(productToLocalStorage);
  localStorage.setItem(localDataName, JSON.stringify(storageLocal));
  }
  

  console.log("products : ", products);
  if (products) {
    for (let product of products) {

  //     if (
  //       product.id == productToLocalStorage.id &&
  //       product.color == productToLocalStorage.color
  //     ) {
  //       product.quantity++;
  //       storageLocal.push(productToLocalStorage);
  //     }else{
  //       storageLocal.push(productToLocalStorage);
  // localStorage.setItem(localDataName, JSON.stringify(storageLocal));
  //     }
    }
  }

  // for (const [k, v] of Object.entries(products)) {
  //   console.log(k, v);
  //   v === productToLocalStorage.id
  //     ? 1 + productToLocalStorage.quantity
  //     : localStorage.setItem(
  //         localDataName,
  //         JSON.stringify(productToLocalStorage)
  //       );
  // }

  // console.log("test", storageLocal);
};
    </script>
  </body>
</html>
